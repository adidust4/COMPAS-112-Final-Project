geom_bar(stat= "identity",width = 1) + geom_text(aes(label = paste0(round(viewershippercentage,1), "%")), position = position_stack(vjust=.5)) +
theme(axis.line = element_blank(),
plot.title = element_text(hjust=0.5)) +
labs(fill="series",
y=NULL,
title="Pie Chart of 7 Day Viewership of Bakeoff",
caption="Source: tidy tuesday")
pie + coord_polar("y", start=0)
pie <- ggplot(ratings2, aes(x="", y=viewershippercentage,fill=factor(series)))+
geom_bar(stat= "identity",width = 1) + geom_text(aes(label = paste0(round(viewershippercentage,1), "%")), position = position_stack(vjust=.5)) +
theme(axis.line = element_blank(),
plot.title = element_text(hjust=0.5)) +
labs(fill="series",
y=NULL,
title="Pie Chart of 7 Day Viewership of Bakeoff",
caption="Source: tidy tuesday")
pie + coord_polar("y", start=0)
pie <- ggplot(ratings2, aes(x="", y=viewershippercentage,fill=factor(series)))+
geom_bar(stat= "identity",width = 1) + geom_text(aes(label = paste0(round(viewershippercentage,1), "%")), position = position_stack(vjust=.5)) +
theme(axis.line = element_blank(),
plot.title = element_text(hjust=0.5)) +
labs(fill="series",
y=NULL,
title="Pie Chart of 7 Day Viewership of Bakeoff",
caption="Source: tidy tuesday")
pie + coord_polar("y", start=0)
pie <- ggplot(ratings2, aes(x="", y=viewershippercentage,fill=factor(series)))+
geom_bar(stat= "identity",width = 1) + geom_text(aes(label = paste0(round(viewershippercentage,1), "%")), position = position_stack(vjust=.5)) +
theme(axis.line = element_blank(),
plot.title = element_text(hjust=0.5)) +
labs(fill="series",
y=NULL,
title="Pie Chart of 7 Day Viewership of Bakeoff",
caption="Source: tidy tuesday")
pie + coord_polar("y", start=0)
pie <- ggplot(ratings2, aes(x="", y=viewershippercentage,fill=factor(series)))+
geom_bar(stat= "identity",width = 1) + geom_text(aes(label = paste0(round(viewershippercentage,1), "%")), position = position_stack(vjust=.5)) +
theme(axis.line = element_blank(),
plot.title = element_text(hjust=0.5)) +
labs(fill="series",
y=NULL,
title="Pie Chart of 7 Day Viewership of Bakeoff",
caption="Source: tidy tuesday")
pie + coord_polar("y", start=0)
highchart() %>% hc_chart(type = "pie") %>%
hc_add_series_labels_values(labels = ratings2$series, values = ratings2$viewershippercentage, color =colors)
require(highcharter)
highchart() %>% hc_chart(type = "pie") %>%
hc_add_series_labels_values(labels = ratings2$series, values = ratings2$viewershippercentage, color =colors)
require(highcharter)
highchart() %>% hc_chart(type = "pie") +  hc_add_series_labels_values(labels = ratings2$series, values = ratings2$viewershippercentage, color =colors)
pie <- ggplot(ratings2, aes(x="", y=viewershippercentage,fill=factor(series)))+
geom_bar(stat= "identity",width = 1) + geom_text(aes(label = paste0(round(viewershippercentage,1), "%")), position = position_stack(vjust=.5)) +
theme(axis.line = element_blank(),
plot.title = element_text(hjust=0.5)) +
labs(fill="series",
y=NULL,
title="Pie Chart of 7 Day Viewership of Bakeoff",
caption="Source: tidy tuesday")
pie + coord_polar("y", start=0)
pie <- ggplot(ratings2, aes(x="", y=viewershippercentage,fill=factor(series)))+
geom_bar(stat= "identity",width = 1) + geom_text(aes(label = paste0(round(viewershippercentage,1), "%")), position = position_stack(vjust=.5)) +
theme(axis.line = element_blank(),
plot.title = element_text(hjust=0.5)) +
labs(fill="series",
y=NULL,
title="Pie Chart of 7 Day Viewership of Bakeoff",
caption="Source: tidy tuesday")
pie + coord_polar("y", start=0)
pie <- ggplot(ratings2, aes(x="", y=viewershippercentage,fill=factor(series)))+
geom_bar(stat= "identity",width = 1) + geom_text(aes(label = paste0(round(viewershippercentage,1), "%")), position = position_stack(vjust=.5)) +
theme(axis.line = element_blank(),
plot.title = element_text(hjust=0.5)) +
labs(fill="series",
y=NULL,
title="Pie Chart of 7 Day Viewership of Bakeoff",
caption="Source: tidy tuesday")
pie + coord_polar("y", start=0)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
scores <- read.csv('compas-scores-raw.csv') %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text)) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "Oriental","Asian", Ethnic_Code_Text))
violent <- read.csv('cox-violent-parsed.csv')
fair_ml <- read.csv('propublica_data_for_fairml.csv')
sex_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(data = sex_score_recidivism) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Recidivism Score")
ggplot(data = sex_score_violence) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Violence")
ggplot(data = sex_score_fail_appear) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Failure to Appear")
race_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(race_score_recidivism, aes(x = reorder(Ethnic_Code_Text, -avg_score), y = avg_score, fill = Ethnic_Code_Text)) +
geom_bar(stat = 'identity') +
labs(title = "Risk of Recidivism Score", x = "Race", y = "Average Score") +
scale_x_discrete(guide = guide_axis(n.dodge=2))
ggplot(race_score_violence, aes(x = reorder(Ethnic_Code_Text, -avg_score), y = avg_score, fill = Ethnic_Code_Text)) +
geom_bar(stat = 'identity') +
labs(title = "Risk of Violence", x = "Race", y = "Average Score") +
scale_x_discrete(guide = guide_axis(n.dodge=2))
ggplot(race_score_fail_appear, aes(x = reorder(Ethnic_Code_Text, -avg_score), y = avg_score, fill = Ethnic_Code_Text)) +
geom_bar(stat = 'identity') +
labs(title = "Risk of Failure to Appear", x = "Race", y = "Average Score") +
scale_x_discrete(guide = guide_axis(n.dodge=2))
total_avg <- mean((race_score_violence %>% filter(Ethnic_Code_Text != "African-American"))$avg_score)
aa_avg <- mean((race_score_violence %>% filter(Ethnic_Code_Text == "African-American"))$avg_score)
aa_avg / total_avg
race_scores_all <- scores %>%
mutate(`Score Type` = DisplayText) %>%
group_by(Ethnic_Code_Text, `Score Type`) %>%
summarize(avg_score = mean(DecileScore))
ggplot(race_scores_all, aes(fill=`Score Type`, y=avg_score, x=reorder(Ethnic_Code_Text, -avg_score))) +
geom_bar(position="dodge", stat="identity") +
labs(title = "COMPAS Risk Score Averages By Race", x = "Race", y = "Average Score (Maximum of 10)") +
scale_x_discrete(guide = guide_axis(n.dodge=2)) +
scale_fill_manual(values = c("#2e282a", "#EF3E36", "#17BEBB")) +
theme_light()
sex_race_score_recidivism <- scores %>%
group_by(Sex_Code_Text, Ethnic_Code_Text, DisplayText) %>%
summarize(avg_score = mean(DecileScore))
ggplot(sex_race_score_recidivism, aes(x = Ethnic_Code_Text, y = avg_score, fill = Sex_Code_Text)) +
geom_bar(stat = 'identity', position = 'dodge') +
labs(title = "Risk of Recidivism Score", x = "Race", y = "Average Score", fill = "Sex") +
theme_minimal()
violent1 <- violent %>% filter(score_text==c("High","Medium","Low")) %>% select(race, sex, age_cat, score_text) %>% group_by(race,sex,age_cat,score_text) %>% summarise(count=n())
ggplot(violent1, aes(x=factor(score_text, level=c('Low', 'Medium','High')),y=count,fill=race)) +geom_bar(stat="identity") + facet_wrap(~factor(age_cat, levels=c('Greater than 45','25 - 45','Less than 25'))) + xlab("risk level of recidivism")
library(tidyverse)
library(ggplot2)
library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(scales)
library(ggpubr)
install.packages("ggpubr")
install.packages("ggpubr")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidyverse)
library(tidyr)
library(tidyverse)
library(tidyverse)
detach("package:tidyverse", unload = TRUE)
library(tidyverse)
library(tidyverse)
install.packages("tidyverse")
library(tidyverse)
library(tidyverse)
library(tidyverse)
library(tidyverse)
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(dplyr)
library(readr)
scores <- read.csv('compas-scores-raw.csv', stringsAsFactors=FALSE) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text))
violent <- read_csv('cox-violent-parsed.csv')
fair_ml <- read_csv('propublica_data_for_fairml.csv')
sex_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(data = sex_score_recidivism) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Recidivism Score")
ggplot(data = sex_score_violence) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Violence")
ggplot(data = sex_score_fail_appear) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Failure to Appear")
race_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(race_score, aes(x = reorder(Ethnic_Code_Text, -avg_score), y = avg_score, fill = Ethnic_Code_Text)) +
geom_bar(stat = 'identity') +
labs(title = "Risk of Recidivism Score", x = "Race", y = "Average Score") +
scale_x_discrete(guide = guide_axis(n.dodge=2))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(dplyr)
library(readr)
scores <- read.csv('compas-scores-raw.csv', stringsAsFactors=FALSE) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text))
violent <- read_csv('cox-violent-parsed.csv')
fair_ml <- read_csv('propublica_data_for_fairml.csv')
sex_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(data = sex_score_recidivism) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Recidivism Score")
ggplot(data = sex_score_violence) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Violence")
ggplot(data = sex_score_fail_appear) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Failure to Appear")
race_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(race_score, aes(x = reorder(Ethnic_Code_Text, -avg_score), y = avg_score, fill = Ethnic_Code_Text)) +
geom_bar(stat = 'identity') +
labs(title = "Risk of Recidivism Score", x = "Race", y = "Average Score") +
scale_x_discrete(guide = guide_axis(n.dodge=2))
mean(scores1$DecileScore) #married
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(dplyr)
library(readr)
scores <- read.csv('compas-scores-raw.csv', stringsAsFactors=FALSE) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text))
violent <- read_csv('cox-violent-parsed.csv')
fair_ml <- read_csv('propublica_data_for_fairml.csv')
sex_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(data = sex_score_recidivism) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Recidivism Score")
ggplot(data = sex_score_violence) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Violence")
ggplot(data = sex_score_fail_appear) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Failure to Appear")
race_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(race_score, aes(x = reorder(Ethnic_Code_Text, -avg_score), y = avg_score, fill = Ethnic_Code_Text)) +
geom_bar(stat = 'identity') +
labs(title = "Risk of Recidivism Score", x = "Race", y = "Average Score") +
scale_x_discrete(guide = guide_axis(n.dodge=2))
scores1 <- scores %>%
filter(MaritalStatus=="Married") %>%
select(Person_ID,AssessmentID,Case_ID,MaritalStatus,DecileScore)
scores2 <- scores %>%
filter(MaritalStatus=="Single")
scores3 <- scores %>%
filter(MaritalStatus=="Divorced")
scores4 <- scores %>%
filter(MaritalStatus=="Significant Other")
scores1.1<- scores %>%
filter(MaritalStatus=="Married", Ethnic_Code_Text=="African-American")
nrow(scores1)
scores %>% mutate(DecileScore= as.factor(DecileScore)) %>% mutate(DecileScore=as.numeric(DecileScore))
mean(scores1$DecileScore) #married
mean(scores2$DecileScore) #single
mean(scores3$DecileScore) #divorced
mean(scores4$DecileScore) #significant other
mean(scores$DecileScore)
mean(scores1.1$DecileScore)
knitr::opts_chunk$set(echo = TRUE)
BrowardRace<- c(.363, .276, .063, .298)
percentrace <- percent(BrowardRace, accurancy=0.1)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(dplyr)
library(readr)
library(scales)
scores <- read.csv('compas-scores-raw.csv', stringsAsFactors=FALSE) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text))
violent <- read_csv('cox-violent-parsed.csv')
fair_ml <- read_csv('propublica_data_for_fairml.csv')
sex_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
sex_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Sex_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(data = sex_score_recidivism) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Recidivism Score")
ggplot(data = sex_score_violence) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Violence")
ggplot(data = sex_score_fail_appear) +
geom_col(aes(x = Sex_Code_Text, y = avg_score)) +
labs(title = "Risk of Failure to Appear")
race_score_recidivism <- scores %>%
filter(DisplayText == "Risk of Recidivism") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_violence <- scores %>%
filter(DisplayText == "Risk of Violence") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
race_score_fail_appear <- scores %>%
filter(DisplayText == "Risk of Failure to Appear") %>%
group_by(Ethnic_Code_Text) %>%
summarize(avg_score = mean(DecileScore))
ggplot(race_score, aes(x = reorder(Ethnic_Code_Text, -avg_score), y = avg_score, fill = Ethnic_Code_Text)) +
geom_bar(stat = 'identity') +
labs(title = "Risk of Recidivism Score", x = "Race", y = "Average Score") +
scale_x_discrete(guide = guide_axis(n.dodge=2))
BrowardRace<- c(.363, .276, .063, .298)
percentrace <- percent(BrowardRace, accurancy=0.1)
pie(BrowardRace,labels=percentrace, main= "Broward County race demographics", col=rainbow(length(BrowardRace)))
legend("topright",c("White Non-Hispanic", "Black Non-Hispanic","other races","Hispanic or Latino"), cex=0.8, fill= rainbow(length(BrowardRace)))
BrowardAge <- c(.409,.215,.155,.058,.072,.091)
percentage <- percent(BrowardAge, accuracy=0.1)
labels <- c("35-64", "18-34","5-17","<5","75+","65-74")
pie(BrowardAge, labels= percentage, main= "Broward County age demographics",col=rainbow(length(BrowardAge)))
legend("topright", c("35-64","18-34","5-17","<5","75+","65-74"), cex=0.8, fill=rainbow(length(BrowardAge)))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(scales)
library(ggpubr)
library(rpart)
library(rpart.plot)
# app pallete
our_colors <- c(`red` = "#F94144", `orange` = "#F3722C", `orange_yellow` = "#F8961E", `pink` = "#F9844A", `yellow` = "#F9C74F", `green` = "#90BE6D", `teal` = "#43AA8B", `light_blue` = "#4D908E", `purple` = "#577590", `blue` = "#277DA1")
palette_colors <- function(...) {
cols <- c(...)
if (is.null(cols))
return (our_colors)
our_colors[cols]
}
palettes <- list(
`risk` = palette_colors("red", "yellow", "green")
)
our_pal <- function(palette = "main", reverse = FALSE, ...) {
pal <- palettes[[palette]]
if (reverse) pal <- rev(pal)
colorRampPalette(pal, ...)
}
scale_color <- function(palette = "main",
discrete = TRUE,
reverse = FALSE,
...) {
pal <- our_pal(palette = palette, reverse = reverse)
if (discrete) {
discrete_scale("colour", paste0("our_", palette), palette = pal, ...)
} else {
scale_color_gradientn(colours = pal(256), ...)
}
}
scale_fill_splashdown <- function(palette = "main", discrete = TRUE, reverse = FALSE, ...) {
pal <- our_pal(palette = palette, reverse = reverse)
if (discrete) {
discrete_scale("fill", paste0("our_", palette), palette = pal, ...)
} else {
scale_fill_gradientn(colours = pal(256), ...)
}
}
scores <- read.csv('compas-scores-raw.csv') %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text)) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "Oriental","Asian", Ethnic_Code_Text))
violent <- read.csv('cox-violent-parsed.csv')
View(scores)
View(violent)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(dplyr)
library(readr)
library(scales)
scores <- read.csv('compas-scores-raw.csv', stringsAsFactors=FALSE) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text))
violent <- read_csv('cox-violent-parsed.csv')
mean(scores1$DecileScore) #married
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(dplyr)
library(readr)
library(scales)
scores <- read.csv('compas-scores-raw.csv', stringsAsFactors=FALSE) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text))
violent <- read_csv('cox-violent-parsed.csv')
mean(scores1$DecileScore) #married
scores1 <- scores %>%
filter(MaritalStatus=="Married") %>%
select(Person_ID,AssessmentID,Case_ID,MaritalStatus,DecileScore)
scores2 <- scores %>%
filter(MaritalStatus=="Single")
scores3 <- scores %>%
filter(MaritalStatus=="Divorced")
scores4 <- scores %>%
filter(MaritalStatus=="Significant Other")
scores1.1<- scores %>%
filter(MaritalStatus=="Married", Ethnic_Code_Text=="African-American")
nrow(scores1)
scores %>% mutate(DecileScore= as.factor(DecileScore)) %>% mutate(DecileScore=as.numeric(DecileScore))
mean(scores1$DecileScore) #married
mean(scores2$DecileScore) #single
mean(scores3$DecileScore) #divorced
mean(scores4$DecileScore) #significant other
mean(scores$DecileScore)
mean(scores1.1$DecileScore)
violent1 <- violent %>% filter(score_text==c("High","Medium","Low")) %>% select(race, sex, age_cat, score_text) %>% group_by(race,sex,age_cat,score_text) %>% summarise(count=n())
ggplot(violent1, aes(x=factor(score_text, level=c('Low', 'Medium','High')),y=count,fill=race)) +geom_bar(stat="identity") + facet_wrap(~factor(age_cat, levels=c('Greater than 45','25 - 45','Less than 25'))) + xlab("risk level of recidivism")
ggplot(violent1, aes(x=factor(score_text, level=c('Low', 'Medium','High')),y=count)) +geom_bar(stat="identity") + facet_wrap(~factor(age_cat, levels=c('Greater than 45','25 - 45','Less than 25'))) + xlab("risk level of recidivism")
ggplot(violent1, aes(x=factor(score_text, level=c('Low', 'Medium','High')),y=count)) +geom_bar(stat="identity") + facet_wrap(~factor(age_cat, levels=c('Greater than 45','25 - 45','Less than 25'))) + xlab("risk level of recidivism")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(dplyr)
library(readr)
library(scales)
scores <- read.csv('compas-scores-raw.csv', stringsAsFactors=FALSE) %>%
mutate(Ethnic_Code_Text = if_else(Ethnic_Code_Text == "African-Am","African-American", Ethnic_Code_Text))
violent <- read_csv('cox-violent-parsed.csv')
ggplot(violent1, aes(x=factor(score_text, level=c('Low', 'Medium','High')),y=count)) +geom_bar(stat="identity") + facet_wrap(~factor(age_cat, levels=c('Greater than 45','25 - 45','Less than 25'))) + xlab("risk level of recidivism")
shiny::runApp('C:/Users/Albat/OneDrive - macalester.edu/Desktop/comp112/project/COMPAS-112-Final-Project/Shiny App')
install.packages("shiny")
shiny::runApp('C:/Users/Albat/OneDrive - macalester.edu/Desktop/comp112/project/COMPAS-112-Final-Project/Shiny App')
runApp('C:/Users/Albat/OneDrive - macalester.edu/Desktop/comp112/project/COMPAS-112-Final-Project/Shiny App')
runApp('C:/Users/Albat/OneDrive - macalester.edu/Desktop/comp112/project/COMPAS-112-Final-Project/Shiny App')
shiny::runApp('C:/Users/Albat/OneDrive - macalester.edu/Desktop/comp112/project/COMPAS-112-Final-Project/Shiny App')
